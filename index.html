<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wlcome to World OF Dev</title>
    <link rel="stylesheet" href="index.css">
</head>
<body>
    <div class="outerdiv">
        <div class="center-div">
            <form id="form">
                <input class="search" width="200" type="text" id="input" placeholder="Search" name="search"
                    autocomplete="off" />
            </form>
        </div>
        <div class="botom">
            <ul class="qul">
                
                
            </ul>

        </div>
        <div class="addform" id="addform" style="display: none;">
            <form id="form1">
                <input type="text" placeholder="Title" name="title" id="title" autocomplete="off">
                <input type="text" placeholder="Image Link" name="img" id="img" autocomplete="off">
                <button type="submit">Add</button>
            </form>
        </div>
    </div>

</body>

<script>
    var formdis = false
    document.onload=featchdata();
    async function   featchdata(){
        var lsdata=JSON.parse(await localStorage.getItem("data"))
        lsdata=lsdata==null?[]:lsdata
        let ele=""
        lsdata.forEach(element => {
            ele+=`<li><div class="qlink" style="background-image: url('${element.img}');" tooltip="${element.title}"></div></li>`
        });
        ele+='<li><div class=" qlink-add" onclick="addfunc()">+</div></li>'
        document.getElementsByTagName("ul")[0].innerHTML=ele
    }
    document.getElementById("form").addEventListener("submit", (e) => {
        e.preventDefault();
        window.location.href = `https://www.google.com/search?q=${document.getElementById('input').value}`;
    })
    const addfunc = () => {
        formdis = !formdis;
        document.getElementsByClassName("qlink-add")[0].style.transform = formdis ? "rotate(45deg)" : "rotate(0deg)"
        document.getElementById("addform").style.display = formdis ? 'block' : 'none';
    }
    document.getElementById("form1").addEventListener("submit", async(e) => {
        e.preventDefault();
        var f = new FormData(document.getElementById("form1"))
        let ls=JSON.parse( await localStorage.getItem("data"));
        ls=ls==null?[]:ls
        console.log(ls)
        var data={
            title:f.get("title"),
            img:f.get("img")
        }
        ls.push((data))
        var a=JSON.stringify(ls)
        console.log(a)
        await localStorage.setItem("data",a);
        addfunc();
        location.reload()

    })
</script>

</html>